<html>
  <head>
    <script type="text/javascript" src="../src/dialog/dialog-comm.js"></script>
    <script type="text/javascript">
      (function(){
        var _comm = new Comm();

        document.addEventListener( "DOMContentLoaded", function( e ){
          var okButton = document.getElementById( "yes" ),
              cancelButton = document.getElementById( "no" ),
              trackName = document.getElementById( "track-name" );

          function okPressed( e ){
            _comm.send( "submit", true );
            _comm.send( "close" );
          } //okPressed

          function cancelPressed( e ){
            _comm.send( "cancel" );
          } //cancelPressed

          document.addEventListener( "keydown", function( e ) {
            if( e.keyCode === 13 ) {
              okPressed( e );
            } else if( e.keyCode === 27 ) {
              cancelPressed( e );
            }
          }, false);

          okButton.addEventListener( "click", okPressed, false );
          cancelButton.addEventListener( "click", cancelPressed, false );

          _comm.listen( "trackdata", function( e ){
            trackName.appendChild( document.createTextNode( e.data ) );
          });

          _comm.listen( "test", function( e ){
            ++_counter;
            document.getElementById( "counter" ).innerHTML = _counter;
          });

        }, false );
      })();
    </script>
  </head>
  <body>
    <h1>Are you sure you want to delete <span id="track-name"></span>?</h1>
    <button id="yes">Yes</button>
    <button id="no">No</button>
  </body>
</html>
